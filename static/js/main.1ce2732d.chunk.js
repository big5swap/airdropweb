(this["webpackJsonpmulti-sender-app"]=this["webpackJsonpmulti-sender-app"]||[]).push([[0],{154:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"EscapeHatchCalled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"stateMutability":"payable","type":"fallback","payable":true},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address payable","name":"_escapeHatchDestination","type":"address"}],"name":"escapeHatch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable[]","name":"_addresses","type":"address[]"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"multiTransferEqual_L1R","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address[]","name":"_addresses","type":"address[]"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"multiTransferTokenEqual_71p","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address payable[]","name":"_addresses","type":"address[]"},{"internalType":"uint256[]","name":"_amounts","type":"uint256[]"},{"internalType":"uint256","name":"_amountSum","type":"uint256"},{"internalType":"uint256[]","name":"_amountsEther","type":"uint256[]"}],"name":"multiTransferTokenEther","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address payable[]","name":"_addresses","type":"address[]"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_amountEther","type":"uint256"}],"name":"multiTransferTokenEtherEqual","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"address[]","name":"_addresses","type":"address[]"},{"internalType":"uint256[]","name":"_amounts","type":"uint256[]"},{"internalType":"uint256","name":"_amountSum","type":"uint256"}],"name":"multiTransferToken_a4A","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address payable[]","name":"_addresses","type":"address[]"},{"internalType":"uint256[]","name":"_amounts","type":"uint256[]"}],"name":"multiTransfer_OST","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function","payable":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_address1","type":"address"},{"internalType":"uint256","name":"_amount1","type":"uint256"},{"internalType":"address payable","name":"_address2","type":"address"},{"internalType":"uint256","name":"_amount2","type":"uint256"}],"name":"transfer2","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive","payable":true},{"inputs":[],"name":"emergencyStop","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},173:function(e,t){},287:function(e,t){},301:function(e){e.exports=JSON.parse("{}")},306:function(e,t){},308:function(e,t){},377:function(e,t){},390:function(e,t,n){},394:function(e,t,n){},428:function(e,t){},44:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"who","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_name","type":"string"},{"name":"_symbol","type":"string"},{"name":"_decimals","type":"uint8"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},451:function(e,t){},452:function(e,t){},517:function(e,t){},519:function(e,t){},547:function(e,t){},549:function(e,t){},550:function(e,t){},555:function(e,t){},557:function(e,t){},564:function(e,t){},577:function(e,t){},589:function(e,t){},592:function(e,t){},597:function(e,t){},608:function(e,t){},611:function(e,t){},663:function(e,t,n){"use strict";n.r(t);var r,a=n(2),s=n.n(a),o=n(30),i=n.n(o),c=n(3),l=n.n(c),u=n(9),d=n(5),p=n(7),h=n(13),b=n(12),f=n(23),m=n(256),x=n.n(m),j=n(0),y=Object(f.b)("UiStore")(r=Object(f.c)(r=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={multisenderAddress:null,defaultAccount:null},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UiStore.tokenStore.proxyMultiSenderAddress();case 2:return n=t.sent,t.next=5,e.props.UiStore.tokenStore.getDefultAccount();case 5:r=t.sent,console.log("Contract Address;",n),console.log("defaultAccount Address;",r),e.setState({multisenderAddress:n,defaultAccount:r});case 9:case"end":return t.stop()}}),t)})))()}},{key:"render",value:function(){var e=this.props.UiStore.web3Store.explorerUrl||"https://etherscan.io";return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsxs)("div",{className:"multisend-container",children:[Object(j.jsx)("a",{href:"#",className:"header-logo"}),Object(j.jsxs)("form",{className:"form form_header",children:[Object(j.jsxs)("label",{htmlFor:"network",className:"multisend-label",children:["Contract Address: ",Object(j.jsx)("a",{target:"_blank",href:"".concat(e,"/address/").concat(this.state.multisenderAddress),children:this.state.multisenderAddress})]}),Object(j.jsxs)("label",{htmlFor:"network",className:"multisend-label",children:["Account Address: ",Object(j.jsx)("a",{target:"_blank",href:"".concat(e,"/address/").concat(this.state.defaultAccount),children:this.state.defaultAccount})]})]})]}),Object(j.jsx)("div",{className:"multisend-container",children:"Supports Mainnet, Ropsten, Rinkeby, Kovan, Goerli, Mumbai, Matic, Bscnain, Bsctest"}),Object(j.jsx)(x.a,{href:"https://github.com/ativofinance/yardAirDrop",target:"_blank",rel:"nofollow"})]})}}]),n}(s.a.Component))||r)||r,v=n(87),k=n(48),O=n(56),g=n(271),w=n(14),S=n.n(w),A=n(107),T=n.n(A),N=n(257),_=n.n(N),P=(n(299),n(258)),C=n(28),E=n.n(C);function G(e){var t=document.createElement("div");return t.innerHTML="".concat(e),t}n(301),n(302);var M,B,F=n(259),H=n.n(F),I=n(88),D=(n(390),Object(P.control)((function(e){var t=e.error,n=e.isChanged,r=e.isUsed,a=Object(g.a)(e,["error","isChanged","isUsed"]);return Object(j.jsxs)("div",{children:[n&&r&&t,Object(j.jsx)("input",Object(O.a)({},a))]})})),function(e){if(!e.toString().trim().length)return Object(j.jsx)("span",{className:"error",children:"required"})}),U=Object(f.b)("UiStore")(M=Object(f.c)(M=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onNext=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("home"===t.step.id){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,r.parseCompleted){e.next=6;break}return e.next=6,r.onCsvChange(r.state.csv);case 6:return e.next=8,r.tokenStore.parseAddresses();case 8:if(console.log("length of addresses",r.tokenStore.jsonAddresses.length),0!==r.tokenStore.jsonAddresses.length){e.next=12;break}return E()({title:"The address list is empty.",text:"Please make sure you set correct CSV or JSON format in input selector",icon:"error"}),e.abrupt("return");case 12:if(!(r.tokenStore.invalid_addresses.length>0)){e.next=15;break}return E()({title:"There are invalid eth addresses. If you click Next, it will remove them from the list.",text:JSON.stringify(r.tokenStore.invalid_addresses.slice(),null,"\n"),icon:"error"}),e.abrupt("return");case 15:t.push("inspect"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),E()({title:"Parsing Error",text:e.t0.message,icon:"error"});case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),r.tokenStore=e.UiStore.tokenStore,r.txStore=e.UiStore.txStore,r.web3Store=e.UiStore.web3Store,r.web3Store.setStartedUrl("#/"),r.onTokenAddress=r.onTokenAddress.bind(Object(k.a)(r)),r.onDecimalsChange=r.onDecimalsChange.bind(Object(k.a)(r)),r.state={format:"csv",placeholder:"\n0xCBA5018De6b2b6F89d84A1F5A68953f07554765e,12\n0xa6Bf70bd230867c870eF13631D7EFf1AE8Ab85c9,1123.45645\n0x00b5F428905DEA1a67940093fFeaCeee58cA91Ae,1.049\n0x00fC79F38bAf0dE21E1fee5AC4648Bc885c1d774,14546\n",tokenAddress:{label:"",value:null},csv:""},r.onParse=r.onParse.bind(Object(k.a)(r)),r.parseCompleted=!1,r.props.addNextHandler(r.onNext),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(""!==this.tokenStore.tokenAddress){var t=this.web3Store.userTokens.filter((function(t){return t.value===e.tokenStore.tokenAddress}));if(t.length>0){var n=t[0];this.setState({tokenAddress:Object(O.a)({},n)})}}if(this.tokenStore.jsonAddresses.length>0){var r=this.tokenStore.jsonAddresses.reduce((function(e,t){var n=Object.keys(t);return e+(n[0]+","+t[n[0]])+"\n"}),"");this.setState({csv:r})}}},{key:"onTokenAddress",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this.setState({tokenAddress:{label:"",value:""}}),e.abrupt("return");case 3:if(n=t.value,!S.a.isAddress(n)){e.next=8;break}return e.next=7,this.tokenStore.setTokenAddress(n);case 7:this.setState({tokenAddress:{label:t.label,value:t.value}});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDecimalsChange",value:function(e){this.tokenStore.setDecimals(e.target.value)}},{key:"onCsvChange",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=[];H()({noheader:!0}).fromString(t).on("csv",(function(e){var t={};2===e.length&&(Object.defineProperty(t,e[0],{value:e[1],writable:!0,configurable:!0,enumerable:!0}),a.push(t))})).on("end",(function(){try{console.log("csv is done"),n.parseCompleted=!0,n.tokenStore.setJsonAddresses(a),e(a)}catch(t){console.error(t),r(t),E()({content:"Your CSV is invalid",icon:"error"})}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onParse",value:function(e){this.setState({csv:e.target.value}),"csv"===this.state.format&&this.onCsvChange(e.target.value)}},{key:"render",value:function(){var e;return this.tokenStore.errors.length>0&&E()("Error!",this.tokenStore.errors.toString(),"error"),this.web3Store.errors.length>0&&E()("Error!",this.web3Store.errors.toString(),"error"),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"description",children:Object(j.jsxs)("ol",{children:[Object(j.jsx)("li",{children:"xuanzhe "}),Object(j.jsx)("li",{children:"Enter comma-separated list of addresses and values to send"}),Object(j.jsxs)("li",{children:["Press the ",Object(j.jsx)("strong",{children:"Next"})," button"]})]})}),Object(j.jsxs)(T.a,{className:"form",children:[Object(j.jsx)("div",{className:"form-inline",children:Object(j.jsxs)("div",{className:"form-inline-i form-inline-i_token-address",children:[Object(j.jsx)("label",{htmlFor:"token-address",className:"multisend-label",children:"Token Address"}),Object(j.jsx)(I.a.Creatable,{isLoading:this.web3Store.loading,name:"token-address",id:"token-address",value:this.state.tokenAddress,onChange:this.onTokenAddress,loadingPlaceholder:"Loading your token addresses...",placeholder:"Please select a token or input the address",options:this.web3Store.userTokens.slice()})]})}),Object(j.jsx)("div",{className:"form-inline",children:Object(j.jsxs)("div",{className:"form-inline-i form-inline-i_token-address-values",children:[Object(j.jsx)("label",{htmlFor:"token-address-values",className:"multisend-label",children:"List of addresses and values"}),Object(j.jsx)(_.a,(e={disabled:this.web3Store.loading,name:"token-address-values",id:"token-address-values","data-gram":!0,validations:[D],placeholder:"Example: ".concat(this.state.placeholder),value:this.state.csv,onBlur:this.onParse},Object(v.a)(e,"id","addresses-with-balances"),Object(v.a)(e,"className","multisend-textarea"),e))]})})]})]})}}]),n}(s.a.Component))||M)||M,W=n(668),z=(s.a.Component,n(18)),L=n.n(z),R=n(151),J=n.n(R);Object(R.createTheme)("solarized",{text:{primary:"#fff",secondary:"rgb(156, 216, 255)",fontFamily:"monospace"},background:{default:"rgba(255,255,255,0)"},context:{background:"rgba(255,255,255,1)",text:"#FFFFFF"},divider:{default:"#073642"},button:{default:"rgba(156, 216, 255, 1)",focus:"rgba(156, 216, 255,.8)",hover:"rgba(156, 216, 255,.8)",disabled:"rgba(156, 216, 255, .5)"},sortFocus:{default:"rgba(156, 216, 255, .54)"}});var Z,Y,K,V,q,Q,X,$,ee,te,ne,re,ae,se,oe,ie,ce,le,ue,de,pe,he,be,fe,me,xe,je,ye,ve,ke,Oe=function(e){var t=[{name:"Address",selector:"address",sortable:!0,grow:3.8},{name:"Amount, "+e.tokenSymbol,selector:"balance",sortable:!0,left:!0}];return Object(j.jsx)(J.a,{title:"List of recipients",columns:t,theme:"solarized",customStyles:{pagination:{style:{marginBottom:"20px"}},cells:{style:{fontFamily:"monospace"}}},pagination:!0,paginationPerPage:10,data:e.data,paginationTotalRows:e.data.length})},ge=Object(f.b)("UiStore")(B=Object(f.c)(B=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onNext=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("inspect"===t.step.id){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!new L.a(r.tokenStore.totalBalance).gt(new L.a(r.tokenStore.defAccTokenBalance))){e.next=7;break}return console.error("Your balance is less than total to send"),E()({title:"Insufficient token balance",text:"You don't have enough tokens to send to all addresses.\nAmount needed: ".concat(r.tokenStore.totalBalance," ").concat(r.tokenStore.tokenSymbol),icon:"error"}),e.abrupt("return");case 7:if(n=r.getMultisendPlusApproveGasEthValue(),a=S.a.toWei(r.tokenStore.ethBalance,"ether"),!n.gt(new L.a(a))){e.next=14;break}return s=parseFloat(S.a.fromWei(n.toString())).toFixed(5),console.error("please fund you account in "),E()({title:"Insufficient ETH balance",text:"You don't have enough ETH to send to all addresses. Amount needed: ".concat(s," ETH"),icon:"error"}),e.abrupt("return");case 14:"0x000000000000000000000000000000000000bEEF"===r.tokenStore.tokenAddress||new L.a(r.tokenStore.allowance).gte(new L.a(r.tokenStore.totalBalance))?t.push("multisend"):t.push("approve"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0),E()({title:"Parsing Error",text:e.t0.message,icon:"error"});case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),r.onGasPriceChange=function(e){e&&(r.gasPriceStore.setSelectedGasPrice(e.value),r.updateCurrentFee())},r.onGasShareChange=function(e){e&&(r.gasPriceStore.setSelectedGasShare(e.value),r.updateCurrentFee())},r.tokenStore=e.UiStore.tokenStore,r.txStore=e.UiStore.txStore,r.gasPriceStore=e.UiStore.gasPriceStore,console.log(r.gasPriceStore.gasPricesArray),r.state={gasPrice:"",transferGas:0,approveGas:0,multisendGas:0},r.gasSharesArray=[{label:"10%",value:"10"},{label:"20%",value:"20"},{label:"50%",value:"50"},{label:"70%",value:"70"},{label:"100%",value:"100"}],r.props.addNextHandler(r.onNext),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.tokenStore.dublicates.length>0&&E()({title:"There were duplicated eth addresses in your list.",text:"".concat(JSON.stringify(this.tokenStore.dublicates.slice(),null,"\n"),".\n Multisender already combined the balances for those addreses. Please make sure it did the calculation correctly."),icon:"warning"}),Object(u.a)(l.a.mark((function t(){var n,r,a,s,o,i,c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.txStore.getTransferGas({slice:e.tokenStore.totalNumberTx,addPerTx:e.tokenStore.arrayLimit});case 3:if(n=t.sent,e.setState({transferGas:n}),"0x000000000000000000000000000000000000bEEF"!==e.tokenStore.tokenAddress){t.next=14;break}return t.next=8,e.txStore.getMultisendGas({slice:e.tokenStore.totalNumberTx,addPerTx:e.tokenStore.arrayLimit});case 8:r=t.sent,a=Math.floor(.975*parseInt(r)),e.setState({multisendGas:a}),e.updateCurrentFee(),t.next=31;break;case 14:if(!(parseFloat(e.tokenStore.allowance)>=parseFloat(e.tokenStore.totalBalance))){t.next=26;break}return t.next=17,e.txStore.getMultisendGas({slice:e.tokenStore.totalNumberTx,addPerTx:e.tokenStore.arrayLimit});case 17:return s=t.sent,o=Math.floor(.71*parseInt(s)),t.next=21,e.txStore.getApproveTxGas();case 21:i=t.sent,e.setState({multisendGas:o,approveGas:i}),e.updateCurrentFee(),t.next=31;break;case 26:return t.next=28,e.txStore.getApproveGas();case 28:c=t.sent,u=Math.floor(.6667*parseInt(c)),e.setState({approveGas:u});case 31:t.next=36;break;case 33:t.prev=33,t.t0=t.catch(0),console.log("3:",t.t0);case 36:case"end":return t.stop()}}),t,null,[[0,33]])})))()}},{key:"updateCurrentFee",value:function(){var e=this,t=setTimeout((function(){clearTimeout(t),e._updateCurrentFeeImpl()}),0)}},{key:"_updateCurrentFeeImpl",value:function(){var e=this.state,t=e.multisendGas,n=e.approveGas,r=e.transferGas,a=this.gasPriceStore.standardInHex,s=new L.a(t).plus(new L.a(n));if(s.gt(new L.a(r)))this.tokenStore.setCurrentFee("0");else{var o=new L.a(r).minus(s),i=new L.a(a).times(o).div(this.tokenStore.totalNumberTx).times(new L.a(parseInt(this.gasPriceStore.selectedGasShare))).div(100).dp(0,1);this.tokenStore.setCurrentFee(i.toString(10))}}},{key:"renderTokenBalance",value:function(){if("0x000000000000000000000000000000000000bEEF"===this.tokenStore.tokenAddress)return null;var e=parseFloat(this.tokenStore.defAccTokenBalance),t=e.toFixed(5);return"0.00000"===t&&(t=e),Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsxs)("p",{children:["Balance, ",this.tokenStore.tokenSymbol]}),Object(j.jsx)("p",{className:"send-info-amount",children:t})]})}},{key:"renderTokenAllowance",value:function(){return"0x000000000000000000000000000000000000bEEF"===this.tokenStore.tokenAddress?null:Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsxs)("p",{children:["Allowance, ",this.tokenStore.tokenSymbol]}),Object(j.jsx)("p",{className:"send-info-amount",children:this.tokenStore.allowance})]})}},{key:"renderTransferGasInfo",value:function(){var e=this.gasPriceStore.standardInHex,t=new L.a(e).times(new L.a(this.state.transferGas)),n=parseFloat(S.a.fromWei(t.toString())).toFixed(5);return"0x000000000000000000000000000000000000bEEF"===this.tokenStore.tokenAddress||new L.a(this.tokenStore.allowance).gte(new L.a(this.tokenStore.totalBalance)),Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsx)("p",{children:"Gas spent without Multisend, ETH"}),Object(j.jsx)("p",{className:"send-info-amount",children:n})]})}},{key:"getMultisendPlusApproveGasEthValue",value:function(){var e=this.gasPriceStore.standardInHex,t=new L.a(this.state.multisendGas).plus(new L.a(this.state.approveGas));return new L.a(e).times(t)}},{key:"renderMultisendGasInfo",value:function(){var e=this.gasPriceStore.standardInHex,t=new L.a(this.state.multisendGas).plus(new L.a(this.state.approveGas)),n=new L.a(e).times(t),r=parseFloat(S.a.fromWei(n.toString())).toFixed(5);return"0x000000000000000000000000000000000000bEEF"===this.tokenStore.tokenAddress||new L.a(this.tokenStore.allowance).gte(new L.a(this.tokenStore.totalBalance))?Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsx)("p",{children:"Gas spent with Multisend, ETH"}),Object(j.jsx)("p",{className:"send-info-amount",children:r})]}):Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsx)("p",{children:"Gas spent with Multisend, ETH"}),Object(j.jsx)("p",{className:"send-info-amount",children:"N/A"})]})}},{key:"renderSavingsGasInfo",value:function(){var e=this.state,t=e.multisendGas,n=e.approveGas,r=e.transferGas,a=this.gasPriceStore.standardInHex,s=new L.a(a).times(new L.a(this.state.transferGas)),o=(S.a.fromWei(s.toString()),new L.a(t).plus(new L.a(n))),i=new L.a(a).times(o),c=(S.a.fromWei(i.toString()),new L.a(r).minus(o)),l=new L.a(a).times(c),u=parseFloat(S.a.fromWei(l.toString())).toFixed(5);return"0x000000000000000000000000000000000000bEEF"===this.tokenStore.tokenAddress||new L.a(this.tokenStore.allowance).gte(new L.a(this.tokenStore.totalBalance))?Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsx)("p",{children:"Your gas savings, ETH"}),Object(j.jsxs)("p",{className:"send-info-amount",children:["",u]})]}):Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsx)("p",{children:"Your gas savings, ETH"}),Object(j.jsx)("p",{className:"send-info-amount",children:"N/A"})]})}},{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"description",children:[Object(j.jsxs)("ol",{children:[Object(j.jsx)("li",{children:"Verify addresses and values"}),Object(j.jsxs)("li",{children:["Press the ",Object(j.jsx)("strong",{children:"Next"})," button"]})]}),Object(j.jsxs)("p",{style:{display:"none"},children:[Object(j.jsx)("strong",{children:"Gas Sharing"})," is a portion of gas saved by this service that you are OK to tip"]})]}),Object(j.jsxs)(T.a,{className:"form",children:[Object(j.jsx)("div",{className:"form-inline",style:{display:"none"},children:Object(j.jsxs)("div",{className:"form-inline-i form-inline-i_gas-price",children:[Object(j.jsx)("label",{htmlFor:"gas-price",className:"multisend-label",children:"Network Speed (Gas Price)"}),Object(j.jsx)(I.a.Creatable,{isLoading:this.gasPriceStore.loading,name:"gas-price",id:"gas-price",value:this.gasPriceStore.selectedGasPrice,onChange:this.onGasPriceChange,loadingPlaceholder:"Fetching gas Price data ...",placeholder:"Please select desired network speed",options:this.gasPriceStore.gasPricesArray.slice()})]})}),Object(j.jsx)("div",{className:"form-inline",style:{display:"none"},children:Object(j.jsxs)("div",{className:"form-inline-i form-inline-i_gas-sharing",children:[Object(j.jsx)("label",{htmlFor:"gas-sharing",className:"multisend-label",children:"Saved Gas Sharing"}),Object(j.jsx)(I.a.Creatable,{isLoading:!1,name:"gas-sharing",id:"gas-sharing",value:this.gasPriceStore.selectedGasShare,onChange:this.onGasShareChange,loadingPlaceholder:"",placeholder:"Please select desired gas sharing",options:this.gasSharesArray.slice()})]})})]}),Object(j.jsxs)("div",{className:"send-info",style:{padding:"15px 0px"},children:[Object(j.jsxs)("div",{className:"send-info-side",children:[Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsxs)("p",{children:["Total to be Sent, ",this.tokenStore.tokenSymbol]}),Object(j.jsx)("p",{className:"send-info-amount",children:this.tokenStore.totalBalance})]}),this.renderTokenBalance(),Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsx)("p",{children:"Total Number of tx Needed"}),Object(j.jsx)("p",{className:"send-info-amount",children:this.tokenStore.totalNumberTx})]})]}),Object(j.jsxs)("div",{className:"send-info-side",children:[this.renderTokenAllowance(),Object(j.jsxs)("div",{className:"send-info-i",children:[Object(j.jsx)("p",{children:"Balance, ETH"}),Object(j.jsx)("p",{className:"send-info-amount",children:this.tokenStore.ethBalance})]})]})]}),Object(j.jsx)(Oe,{data:this.tokenStore.addressesData,tokenSymbol:this.tokenStore.tokenSymbol})]})})}}]),n}(s.a.Component))||B)||B,we=Object(f.b)("UiStore")(Z=Object(f.c)(Z=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.tx,r=t.explorerUrl,a=n.name,s=n.hash,o=n.status;switch(o){case"mined":e="table-td_check-hash_done";break;case"error":e="table-td_check-hash_error";break;case"pending":e="table-td_check-hash_wait";break;default:e="table-td_check-hash_wait"}return Object(j.jsx)("div",{className:"table-tr",children:Object(j.jsxs)("div",{className:"table-td table-td_check-hash ".concat(e),children:["TxHash: ",Object(j.jsx)("a",{target:"_blank",href:"".concat(r,"/tx/").concat(s),children:s})," ",Object(j.jsx)("br",{})," ",a," ",Object(j.jsx)("br",{})," Status: ",o]})})}}]),n}(s.a.Component))||Z)||Z,Se=Object(f.b)("UiStore")(Y=Object(f.c)(Y=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onNext=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("approve"===t.step.id){e.next=2;break}return e.abrupt("return");case 2:t.push("inspect");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.props=e,r.txStore=e.UiStore.txStore,r.explorerUrl=e.UiStore.web3Store.explorerUrl,r.intervalId=null,r.state={txs:r.txStore.txs},r.props.addNextHandler(r.onNext),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.txStore.doApprove();case 3:e.setState({txs:e.txStore.txs}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("doApprove error:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))(),null===this.intervalId&&(this.intervalId=setInterval((function(){e.setState({txs:e.txStore.txs})}),1e3))}},{key:"componentWillUnmount",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}},{key:"render",value:function(){var e,t=this,n=this.state.txs,r=n.map((function(e,n){return Object(j.jsx)(we,{tx:Object(O.a)({},e),explorerUrl:t.explorerUrl},n)})),a=n.reduce((function(e,t){var n=t.status;return e&&"mined"===n}),!0);return e=n.length>0?a?"Approve transaction is mined. Press the Next button to continue":"Approve transaction was sent out. Now wait until it is mined":"Waiting for you to sign an Approve transaction in Metamask",Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"description",children:[Object(j.jsxs)("div",{children:["Sign an Approve transaction in MetaMask",Object(j.jsx)("br",{}),"to send tokens to many recipients from the Multisend smart contract"]}),Object(j.jsx)("p",{children:"\xa0"}),Object(j.jsxs)("ol",{children:[Object(j.jsx)("li",{children:"Confirm Approve transaction in MetaMask"}),Object(j.jsx)("li",{children:"Wait for the transaction to be mined"}),Object(j.jsxs)("li",{children:["Press the ",Object(j.jsx)("strong",{children:"Next"})," button"]})]})]}),Object(j.jsxs)("form",{className:"form",children:[Object(j.jsx)("p",{children:e}),Object(j.jsx)("div",{className:"table",children:r})]})]})})}}]),n}(s.a.Component))||Y)||Y,Ae=Object(f.b)("UiStore")(K=Object(f.c)(K=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onNext=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("multisend"===t.step.id){e.next=2;break}return e.abrupt("return");case 2:location.reload();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.txStore=e.UiStore.txStore,r.tokenStore=e.UiStore.tokenStore,r.explorerUrl=e.UiStore.web3Store.explorerUrl,r.intervalId=null,r.state={txs:r.txStore.txs,totalNumberOftx:r.calcTotalNumberOftx()},r.doSendExecuted=!1,r.props.addNextHandler(r.onNext),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.doSendExecuted){t.next=6;break}return e.doSendExecuted=!0,t.next=5,e.txStore.doSend();case 5:e.setState({txs:e.txStore.txs,totalNumberOftx:e.calcTotalNumberOftx()});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("doApprove error:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))(),null===this.intervalId&&(this.intervalId=setInterval((function(){e.setState({txs:e.txStore.txs,totalNumberOftx:e.calcTotalNumberOftx()})}),1e3))}},{key:"componentWillUnmount",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}},{key:"calcTotalNumberOftx",value:function(){return Number(this.tokenStore.totalNumberTx)}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.txs,a=n.totalNumberOftx,s=r.map((function(e,n){return Object(j.jsx)(we,{tx:Object(O.a)({},e),explorerUrl:t.explorerUrl},n)})),o=r.reduce((function(e,t){var n=t.status;return e&&"mined"===n}),!0);if(r.length===a)e=o?"All transactions are mined. Congratulations!":"Transactions were sent out. Now wait until all transactions are mined.";else{var i=a-r.length;e="Waiting for you to sign transaction in Metamask",a>1&&(e="Waiting for you to sign ".concat(i," transactions in Metamask"))}var c="Sign a multisend transaction in MetaMask";a>1&&(c="Sign all ".concat(a," multisend transactions in MetaMask"));var l="to send tokens to many recipients from the Multisend smart contract";return"ETH"===this.tokenStore.tokenSymbol&&(l="to send ETH to many recipients from the Multisend smart contract"),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"description",children:[Object(j.jsxs)("div",{children:[c,Object(j.jsx)("br",{}),l]}),Object(j.jsx)("p",{children:"\xa0"}),Object(j.jsxs)("ol",{children:[Object(j.jsx)("li",{children:"Confirm all multisend transactions in MetaMask"}),Object(j.jsx)("li",{children:"Wait for all transactions to be mined"}),Object(j.jsx)("li",{children:"Check transactions on etherscan"}),Object(j.jsxs)("li",{children:["Press the ",Object(j.jsx)("strong",{children:"Next"})," button"]})]})]}),Object(j.jsxs)("form",{className:"form",children:[Object(j.jsx)("p",{children:e}),Object(j.jsx)("div",{className:"table",children:s})]})]})})}}]),n}(s.a.Component))||K)||K,Te=(s.a.Component,Object(f.b)("UiStore")(V=Object(f.c)(V=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onTxInput=r.onTxInput.bind(Object(k.a)(r)),r.txStore=e.UiStore.txStore,r.state={txHash:""},r}return Object(p.a)(n,[{key:"onTxInput",value:function(e){var t=this,n=e.target.value;setTimeout(Object(u.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(66!==n.length){e.next=8;break}return e.next=3,t.txStore.getTxReceipt(n);case 3:r=e.sent,console.log(r),t.setState({txHash:n}),e.next=9;break;case 8:E()({content:G("Tx Hash is not valid"),icon:"error"});case 9:case"end":return e.stop()}}),e)}))),750)}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"multisend-container multisend-container_bg container_opacity",children:Object(j.jsxs)("div",{className:"content",children:[Object(j.jsxs)("div",{className:"table",children:[Object(j.jsx)("label",{htmlFor:"txhash",className:"multisend-label",children:"Transaction Hash"}),Object(j.jsx)("input",{onChange:this.onTxInput,type:"text",className:"input",id:"txhash"}),Object(j.jsxs)("div",{className:"table-tr table-tr_title",children:[Object(j.jsx)("div",{className:"table-td",children:"Token Name"}),Object(j.jsx)("div",{className:"table-td",children:"Address"}),Object(j.jsx)("div",{className:"table-td",children:"Amount"})]}),Object(j.jsxs)("div",{className:"table-tr",children:[Object(j.jsx)("div",{className:"table-td",children:Object(j.jsx)("p",{children:"Name 1"})}),Object(j.jsx)("div",{className:"table-td",children:Object(j.jsx)("p",{className:"break-all",children:"0xc6300135a8fcd43123bb486ff06831b5345d0971"})}),Object(j.jsx)("div",{className:"table-td",children:Object(j.jsx)("p",{children:"2.5672 ETH"})})]}),Object(j.jsxs)("div",{className:"table-tr",children:[Object(j.jsx)("div",{className:"table-td",children:Object(j.jsx)("p",{children:"Name 2"})}),Object(j.jsx)("div",{className:"table-td",children:Object(j.jsx)("p",{className:"break-all",children:"0x0a7772cdbeee6dbdfdf944dd3e11d32d6a183bde"})}),Object(j.jsx)("div",{className:"table-td",children:Object(j.jsx)("p",{children:"8.009 ETH"})})]})]}),Object(j.jsx)(W.a,{className:"button button_next",to:"/",children:"Back to Home"})]})})}}]),n}(s.a.Component))||V),s.a.Component,n(671)),Ne=n(672),_e=n(674),Pe=n(670),Ce=(n(394),n(43)),Ee=function(){return Object(j.jsx)(Ce.WithWizard,{render:function(e){var t=e.next,n=e.previous,r=e.step;e.steps,e.push;return Object(j.jsxs)("div",{className:"multisend-buttons",children:["home"!==r.id&&"multisend"!==r.id&&Object(j.jsx)("button",{className:"multisend-button multisend-button_prev",onClick:n,children:"Back"}),"multisend"===r.id&&Object(j.jsx)("button",{className:"multisend-button multisend-button_prev",onClick:t,children:"Home"}),"multisend"!==r.id&&Object(j.jsx)("button",{className:"multisend-button multisend-button_next",onClick:t,children:"Next"})]})}})},Ge=n(270),Me=n(264),Be=Object(f.b)("UiStore")(q=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onNext=function(e){Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r.nextHandlers.forEach(function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(n){console.log("onNext:",n)}case 1:case"end":return t.stop()}}),t)})))()},r.addNextHandler=function(e){r.nextHandlers.push(e)},r.tokenStore=e.UiStore.tokenStore,r.web3Store=e.UiStore.web3Store,r.nextHandlers=[],r.state={loading:r.web3Store.loading},r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.tokenStore.proxyMultiSenderAddress();case 3:e.setState((function(t,n){return{loading:e.web3Store.loading}})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("App:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},{key:"render",value:function(){var e=this,t=this.web3Store.startedUrl;return"#/"!==t&&"#/home"!==t?(this.web3Store.setStartedUrl("#/"),Object(j.jsx)(Te.a,{to:{pathname:"/"}})):Object(j.jsxs)("div",{children:[Object(j.jsx)(y,{}),Object(j.jsx)(Ne.a,{render:function(t){var n=t.history;return Object(j.jsx)(Ce.Wizard,{history:n,onNext:e.onNext,render:function(t){var n=t.step,r=t.steps;return Object(j.jsx)("div",{className:"multisend-container multisend-container_bg",children:Object(j.jsxs)("div",{className:"content",children:[Object(j.jsxs)("h1",{className:"title",children:[Object(j.jsx)("strong",{children:"Welcome to YARD"})," AirDrop Tool"]}),Object(j.jsx)(Ge.a,{percent:(r.indexOf(n)+1)/r.length*100,className:"pad-b"}),Object(j.jsx)("div",{className:"sweet-loading",children:Object(j.jsx)(Me.PulseLoader,{color:"#123abc",loading:e.state.loading})}),Object(j.jsx)(_e.a,{children:Object(j.jsx)(Pe.a,{classNames:"multisend",timeout:{enter:500,exit:500},children:Object(j.jsxs)(Ce.Steps,{step:n,children:[Object(j.jsx)(Ce.Step,{id:"home",children:Object(j.jsx)(U,{addNextHandler:e.addNextHandler})}),Object(j.jsx)(Ce.Step,{id:"inspect",children:Object(j.jsx)(ge,{addNextHandler:e.addNextHandler})}),Object(j.jsx)(Ce.Step,{id:"approve",children:Object(j.jsx)(Se,{addNextHandler:e.addNextHandler})}),Object(j.jsx)(Ce.Step,{id:"multisend",children:Object(j.jsx)(Ae,{addNextHandler:e.addNextHandler})})]},n.id)},n.id)}),Object(j.jsx)(Ee,{})]})})}})}})]})}}]),n}(s.a.Component))||q,Fe=n(673),He=n(20),Ie=n(10),De=(n(97),n(6)),Ue=n(86),We=n.n(Ue),ze=null,Le=null,Re=function(){return Le||(Le=new Promise((function(e,t){null===ze?window.addEventListener("load",(function(){if(!window.hasOwnProperty("ethereum")){return console.log("No web3 instance injected, using Local web3."),console.error("Metamask not found"),void t({message:"Metamask is not installed. Please go to\n          https://metamask.io and return to this page after you installed it"})}var n=new We.a(We.a.givenProvider);n.eth.net.getId().then((function(r){var a,s,o;switch(console.log("netId",r),r=""+r){case"1":a="Mainnet",s="api",o="https://etherscan.io",console.log("This is Foundation",r);break;case"3":a="Ropsten",s="ropsten",o="https://ropsten.etherscan.io",console.log("This is Ropsten",r);break;case"4":a="Rinkeby",s="rinkeby",o="https://rinkeby.etherscan.io",console.log("This is Rinkeby",r);break;case"42":a="Kovan",s="kovan",o="https://kovan.etherscan.io",console.log("This is Kovan",r);break;case"56":a="Bsc",s="bsc",o="https://bscscan.com",console.log("This is Bsc",r);break;case"97":a="BscTest",s="bsc",o="https://testnet.bscscan.com",console.log("This is Bsc Test",r);break;case"99":a="POA Core",s="poa",o="https://poaexplorer.com",console.log("This is Core",r);break;case"77":a="POA Sokol",s="https://trust-sokol.herokuapp.com",o="https://sokol.poaexplorer.com",console.log("This is Sokol",r);break;case"137":a="Matic",s="api",o="https://polygonscan.com",console.log("This is Matic",r);break;case"80001":a="Mumbai",s="mumbai",o="https://mumbai.polygonscan.com",console.log("This is Mumbai",r);break;default:a="Unknown",console.log("This is an unknown network.",r)}document.title="".concat(a," - YardAirDrop dApp"),new Promise((function(e,t){Object(u.a)(l.a.mark((function n(){var r,a,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=window,a=r.ethereum,n.next=4,a.request({method:"eth_requestAccounts"});case 4:s=n.sent,e(s),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0),t(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()})).then((function(i){var c=i.length>0?i[0]:null,l=n.eth.defaultAccount||c||null;null!==l?(n.eth.estimateGas.__proto__&&n.eth.estimateGas.__proto__.call&&(console.log("typeof web3.eth.estimateGas.__proto__.call:",typeof n.eth.estimateGas.__proto__.call),n.eth.estimateGas.call=n.eth.estimateGas.__proto__.call,console.log("typeof web3.eth.estimateGas.call:",typeof n.eth.estimateGas.call)),e(ze={web3Instance:n,netIdName:a,netId:r,injectedWeb3:!0,defaultAccount:l,trustApiName:s,explorerUrl:o})):t({message:"Please unlock your metamask and refresh the page"})})).catch((function(e){t(e)}))})).catch((function(e){t(e)})),console.log("Injected web3 detected.")})):e(ze)}))),Le},Je=(Q=function(){function e(t){Object(d.a)(this,e),Object(He.a)(this,"web3",X,this),Object(He.a)(this,"defaultAccount",$,this),Object(He.a)(this,"loading",ee,this),Object(He.a)(this,"errors",te,this),Object(He.a)(this,"userTokens",ne,this),Object(He.a)(this,"explorerUrl",re,this),Object(He.a)(this,"startedUrl",ae,this),this.userTokensInitialized=!1}return Object(p.a)(e,[{key:"setExplorerUrl",value:function(e){this.explorerUrl=e}},{key:"setStartedUrl",value:function(e){this.startedUrl=e}},{key:"getWeb3Promise",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Re().then(function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.explorerUrl){e.next=2;break}return e.abrupt("return",t);case 2:return r=n.web3Instance,a=n.defaultAccount,s=n.netId,o=n.netIdName,t.defaultAccount=a,t.web3=r,t.netId=s,t.netIdName=o,e.next=9,t.getUserTokens(n);case 9:return t.setExplorerUrl(n.explorerUrl),console.log("web3 loaded"),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw console.error(e,"web3 not loaded"),t.errors.push(e.message),e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMutiContractAdd",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("blockchain_network:",t),"mumbai"!==t&&"matic"!==t){e.next=5;break}return e.abrupt("return","0x068F8339905E65DA559cB6066E0d9F94C3E3b979");case 5:if("bsc"!=t){e.next=9;break}return e.abrupt("return","0x35A785C971D39166DADD916a94aA9c28e9D44923");case 9:if("bsctest"!=t){e.next=13;break}return e.abrupt("return","0x931551F8540d1b85c3081FD8096C66B0b6E25522");case 13:return e.abrupt("return","0x068F8339905E65DA559cB6066E0d9F94C3E3b979");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserTokens",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.trustApiName,n=t.defaultAccount,e.abrupt("return",new Promise((function(e,t){if(r.userTokensInitialized)e(r);else{var a=r.netIdName.toLowerCase();console.log("blockchain_network:",a);var s="",o="",i="";s="mainnet"===a||"matic"===a||"bsc"===a?"":"bsctest"===a?"-testnet":"-"+a,"mumbai"===a||"matic"===a?(o="polygonscan.com",i="JC4VZGRZ3MCJFJ34DFA3K67K3ZD78ZTYUA"):"bsc"==a||"bsctest"==a?(o="bscscan.com",i="SGZRB9A29C38QQFPC1HP3IKZH97VV4AZZG"):(o="etherscan.io",i="JC4VZGRZ3MCJFJ34DFA3K67K3ZD78ZTYUA"),window.fetch("https://api".concat(s,".").concat(o,"/api?module=account&action=tokentx&address=").concat(n,"&startblock=0&endblock=999999999&sort=desc&apikey=").concat(i)).then((function(e){return e.json()})).then((function(s){if(!s.result||"object"!==typeof s.result||!s.result.hasOwnProperty("length"))return r.loading=!1,void t("Failed to load user tokens. Try again a minute later please.");for(var o=s.result.filter((function(e){return!(!e.hasOwnProperty("to")||e.to.toLowerCase()!=n.toLowerCase())&&(!!e.hasOwnProperty("contractAddress")&&(!!e.hasOwnProperty("tokenName")&&(!!e.hasOwnProperty("tokenSymbol")&&!!e.hasOwnProperty("tokenDecimal"))))})).map((function(e){var t=e.contractAddress,n=(e.tokenName,e.tokenSymbol);e.tokenDecimal;return{label:"".concat(n," - ").concat(t),value:t,tokenSymbol:n}})),i={},c=0;c<o.length;c++){var l=o[c];i[l.value]=l}var u=Object.keys(i).map((function(e){return i[e]}));"mumbai"===a||"matic"===a?u.unshift({value:"0x000000000000000000000000000000000000bEEF",label:"MATIC - Polygon Native Currency"}):u.unshift({value:"0x000000000000000000000000000000000000bEEF",label:"ETH - Ethereum Native Currency"}),r.userTokens=u,r.userTokensInitialized=!0,r.loading=!1,e(r)})).catch((function(e){r.loading=!1,console.error(e),t(e)}))}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),X=Object(Ie.a)(Q.prototype,"web3",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),$=Object(Ie.a)(Q.prototype,"defaultAccount",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ee=Object(Ie.a)(Q.prototype,"loading",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),te=Object(Ie.a)(Q.prototype,"errors",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=Object(Ie.a)(Q.prototype,"userTokens",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=Object(Ie.a)(Q.prototype,"explorerUrl",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ae=Object(Ie.a)(Q.prototype,"startedUrl",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.location.hash}}),Object(Ie.a)(Q.prototype,"setExplorerUrl",[De.c],Object.getOwnPropertyDescriptor(Q.prototype,"setExplorerUrl"),Q.prototype),Object(Ie.a)(Q.prototype,"setStartedUrl",[De.c],Object.getOwnPropertyDescriptor(Q.prototype,"setStartedUrl"),Q.prototype),Q),Ze=n(44),Ye=n(18);var Ke,Ve,qe,Qe,Xe,$e,et,tt,nt,rt=(se=function(){function e(t){Object(d.a)(this,e),Object(He.a)(this,"decimals",oe,this),Object(He.a)(this,"jsonAddresses",ie,this),Object(He.a)(this,"tokenAddress",ce,this),Object(He.a)(this,"defAccTokenBalance",le,this),Object(He.a)(this,"allowance",ue,this),Object(He.a)(this,"currentFee",de,this),Object(He.a)(this,"tokenSymbol",pe,this),Object(He.a)(this,"ethBalance",he,this),Object(He.a)(this,"balances_to_send",be,this),Object(He.a)(this,"addresses_to_send",fe,this),Object(He.a)(this,"invalid_addresses",me,this),Object(He.a)(this,"filteredAddresses",xe,this),Object(He.a)(this,"totalBalance",je,this),Object(He.a)(this,"arrayLimit",ye,this),Object(He.a)(this,"errors",ve,this),Object(He.a)(this,"dublicates",ke,this),this.web3Store=t.web3Store,this.gasPriceStore=t.gasPriceStore}return Object(p.a)(e,[{key:"proxyMultiSenderAddress",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.web3Store.getWeb3Promise();case 3:return t=e.sent,e.next=6,this.web3Store.getMutiContractAdd(t.netIdName.toLowerCase());case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:return e.abrupt("return","");case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDefultAccount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.web3Store.getWeb3Promise();case 3:return t=e.sent,e.abrupt("return",t.defaultAccount);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.abrupt("return","");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDecimals",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.decimals){e.next=2;break}return e.abrupt("return",this.decimals);case 2:return e.prev=2,n=this.web3Store.web3,r=new n.eth.Contract(Ze,t),e.next=7,r.methods.decimals().call();case 7:return this.decimals=e.sent,e.abrupt("return",this.decimals);case 11:e.prev=11,e.t0=e.catch(2),this.errors.push("Cannot get decimals for token contract.\n Please make sure you are on the right network and token address exists"),console.error("Get Decimals",e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.defAccTokenBalance){e.next=2;break}return e.abrupt("return",this.defAccTokenBalance);case 2:return e.prev=2,t=this.web3Store.web3,n=new t.eth.Contract(Ze,this.tokenAddress),e.next=7,n.methods.balanceOf(this.web3Store.defaultAccount).call();case 7:return r=e.sent,this.defAccTokenBalance=new Ye(r).div(this.multiplier).toString(10),t.eth.subscribe("newBlockHeaders",function(){var e=Object(u.a)(l.a.mark((function e(t,r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.log(t),e.abrupt("return");case 3:return e.next=5,n.methods.balanceOf(a.web3Store.defaultAccount).call();case 5:s=e.sent,a.defAccTokenBalance=new Ye(s).div(a.multiplier).toString(10);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",this.defAccTokenBalance);case 13:e.prev=13,e.t0=e.catch(2),this.errors.push("".concat(this.web3Store.defaultAccount," doesn't have token balance.\n Please make sure you are on the right network and token address exists")),console.error("getBalance",e.t0);case 17:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"getEthBalance",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.ethBalance){e.next=2;break}return e.abrupt("return",this.ethBalance);case 2:return e.prev=2,t=this.web3Store.web3,e.next=6,t.eth.getBalance(this.web3Store.defaultAccount);case 6:return n=e.sent,n=S.a.fromWei(n),this.ethBalance=new Ye(n).toFormat(3),t.eth.subscribe("newBlockHeaders",function(){var e=Object(u.a)(l.a.mark((function e(n,a){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return console.log(n),e.abrupt("return");case 3:return e.next=5,t.eth.getBalance(r.web3Store.defaultAccount);case 5:s=e.sent,s=S.a.fromWei(s),r.ethBalance=new Ye(s).toFormat(3);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",this.ethBalance);case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTokenSymbol",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.tokenSymbol){e.next=2;break}return e.abrupt("return",this.tokenSymbol);case 2:return e.prev=2,n=this.web3Store.web3,r=new n.eth.Contract(Ze,t),e.next=7,r.methods.symbol().call();case 7:return this.tokenSymbol=e.sent,e.abrupt("return",this.tokenSymbol);case 11:e.prev=11,e.t0=e.catch(2),this.errors.push("Token with this Address doesnt exist.\n Please make sure you are on the right network and token address exists"),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllowance",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.allowance){e.next=2;break}return e.abrupt("return",this.allowance);case 2:return e.prev=2,t=this.web3Store.web3,n=new t.eth.Contract(Ze,this.tokenAddress),e.t0=n.methods,e.t1=this.web3Store.defaultAccount,e.next=9,this.proxyMultiSenderAddress();case 9:return e.t2=e.sent,e.next=12,e.t0.allowance.call(e.t0,e.t1,e.t2).call();case 12:return r=e.sent,this.allowance=new Ye(r).div(this.multiplier).toString(10),t.eth.subscribe("newBlockHeaders",function(){var e=Object(u.a)(l.a.mark((function e(t,r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.log(t),e.abrupt("return");case 3:return e.t0=n.methods,e.t1=a.web3Store.defaultAccount,e.next=7,a.proxyMultiSenderAddress();case 7:return e.t2=e.sent,e.next=10,e.t0.allowance.call(e.t0,e.t1,e.t2).call();case 10:s=e.sent,a.allowance=new Ye(s).div(a.multiplier).toString(10);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",this.allowance);case 18:e.prev=18,e.t3=e.catch(2),this.errors.push("Token address doesn't have allowance method.\n Please make sure you are on the right network and token address exists.\n\n         Your account: ".concat(this.web3Store.defaultAccount)),console.error("GetAllowance",e.t3);case 22:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentFee",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.currentFee);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCurrentFee",value:function(e){this.currentFee=S.a.fromWei(e)}},{key:"getArrayLimit",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.arrayLimit=200,e.abrupt("return",this.arrayLimit);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTokenAddress",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3Store.getWeb3Promise();case 2:return e.next=4,this.getCurrentFee();case 4:return e.next=6,this.getEthBalance();case 6:return e.next=8,this.getArrayLimit();case 8:if(this.decimals="",this.defAccTokenBalance="",this.allowance="",this.tokenSymbol="",!S.a.isAddress(this.web3Store.defaultAccount)||"0x000000000000000000000000000000000000bEEF"===t){e.next=24;break}return this.tokenAddress=t,e.next=16,this.getDecimals(t);case 16:return e.next=18,this.getBalance();case 18:return e.next=20,this.getAllowance();case 20:return e.next=22,this.getTokenSymbol(t);case 22:e.next=28;break;case 24:this.tokenAddress=t,this.tokenSymbol="ETH",this.decimals=18,this.defAccTokenBalance=this.ethBalance;case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDecimals",value:function(e){this.decimals=e}},{key:"setJsonAddresses",value:function(e){this.jsonAddresses=e}},{key:"reset",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.decimals="",this.jsonAddresses=[],this.tokenAddress="",this.defAccTokenBalance="",this.allowance="",this.currentFee="0",this.tokenSymbol="",this.ethBalance="",this.balances_to_send=[],this.addresses_to_send=[],this.invalid_addresses=[],this.filteredAddresses=[],this.totalBalance="0",this.arrayLimit=0,this.errors=[],this.dublicates=[];case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseAddresses",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addresses_to_send=[],this.dublicates=[],this.totalBalance=0,this.invalid_addresses=[],this.balances_to_send=[],e.abrupt("return",new Promise((function(e,n){try{t.jsonAddresses.forEach((function(e,r){0===Object.keys(e).length&&n({message:"There was an error parsing ".concat(JSON.stringify(e)," at line ").concat(r)});var a=Object.keys(e)[0].replace(/\s/g,"").replace("0X","0x");if(a=S.a.toChecksumAddress(a),S.a.isAddress(a)){var s=Object.values(e)[0];t.totalBalance=new Ye(s).plus(t.totalBalance).toString(10),s=t.multiplier.times(s);var o=t.addresses_to_send.indexOf(a);-1===o?(t.addresses_to_send.push(a),t.balances_to_send.push(s.toString(10))):(-1===t.dublicates.indexOf(a)&&t.dublicates.push(a),t.balances_to_send[o]=new Ye(t.balances_to_send[o]).plus(s).toString(10))}else t.invalid_addresses.push(a)})),t.jsonAddresses=t.addresses_to_send.map((function(e,n){var r={};return r[e]=new Ye(t.balances_to_send[n]).div(t.multiplier).toString(10),r})),e(t.jsonAddresses),"0x000000000000000000000000000000000000bEEF"===t.tokenAddress&&(t.allowance=t.totalBalance)}catch(r){n(r)}})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"totalBalanceWithDecimals",get:function(){return new Ye(this.totalBalance).times(this.multiplier).toString(10)}},{key:"multiplier",get:function(){var e=Number(this.decimals);return new Ye(10).pow(e)}},{key:"totalNumberTx",get:function(){return Math.ceil(this.jsonAddresses.length/this.arrayLimit)}},{key:"addressesData",get:function(){return this.jsonAddresses.map((function(e){return{address:Object.keys(e)[0].replace(/\s/g,""),balance:Object.values(e)[0]}}))}}]),e}(),oe=Object(Ie.a)(se.prototype,"decimals",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ie=Object(Ie.a)(se.prototype,"jsonAddresses",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce=Object(Ie.a)(se.prototype,"tokenAddress",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),le=Object(Ie.a)(se.prototype,"defAccTokenBalance",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ue=Object(Ie.a)(se.prototype,"allowance",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),de=Object(Ie.a)(se.prototype,"currentFee",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0"}}),pe=Object(Ie.a)(se.prototype,"tokenSymbol",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),he=Object(Ie.a)(se.prototype,"ethBalance",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),be=Object(Ie.a)(se.prototype,"balances_to_send",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe=Object(Ie.a)(se.prototype,"addresses_to_send",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=Object(Ie.a)(se.prototype,"invalid_addresses",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=Object(Ie.a)(se.prototype,"filteredAddresses",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=Object(Ie.a)(se.prototype,"totalBalance",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0"}}),ye=Object(Ie.a)(se.prototype,"arrayLimit",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ve=Object(Ie.a)(se.prototype,"errors",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ke=Object(Ie.a)(se.prototype,"dublicates",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(Ie.a)(se.prototype,"getDecimals",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"getDecimals"),se.prototype),Object(Ie.a)(se.prototype,"getAllowance",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"getAllowance"),se.prototype),Object(Ie.a)(se.prototype,"getCurrentFee",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"getCurrentFee"),se.prototype),Object(Ie.a)(se.prototype,"setTokenAddress",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"setTokenAddress"),se.prototype),Object(Ie.a)(se.prototype,"setDecimals",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"setDecimals"),se.prototype),Object(Ie.a)(se.prototype,"setJsonAddresses",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"setJsonAddresses"),se.prototype),Object(Ie.a)(se.prototype,"reset",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"reset"),se.prototype),Object(Ie.a)(se.prototype,"parseAddresses",[De.c],Object.getOwnPropertyDescriptor(se.prototype,"parseAddresses"),se.prototype),Object(Ie.a)(se.prototype,"totalBalanceWithDecimals",[De.d],Object.getOwnPropertyDescriptor(se.prototype,"totalBalanceWithDecimals"),se.prototype),Object(Ie.a)(se.prototype,"multiplier",[De.d],Object.getOwnPropertyDescriptor(se.prototype,"multiplier"),se.prototype),Object(Ie.a)(se.prototype,"totalNumberTx",[De.d],Object.getOwnPropertyDescriptor(se.prototype,"totalNumberTx"),se.prototype),Object(Ie.a)(se.prototype,"addressesData",[De.d],Object.getOwnPropertyDescriptor(se.prototype,"addressesData"),se.prototype),se),at=(Ke=function(){function e(t){Object(d.a)(this,e),Object(He.a)(this,"gasPrices",Ve,this),Object(He.a)(this,"loading",qe,this),Object(He.a)(this,"gasPricesArray",Qe,this),Object(He.a)(this,"selectedGasPrice",Xe,this),Object(He.a)(this,"selectedGasShare",$e,this),this.gasPricePromise=null,this.getGasPrices()}return Object(p.a)(e,[{key:"getGasPrices",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{average:21,fast:24.7,slow:19});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"standardInHex",get:function(){var e=S.a.toWei(this.selectedGasPrice.toString(),"gwei");return S.a.toHex(e)}},{key:"setSelectedGasPrice",value:function(e){this.selectedGasPrice=e}},{key:"setSelectedGasShare",value:function(e){this.selectedGasShare=e}}]),e}(),Ve=Object(Ie.a)(Ke.prototype,"gasPrices",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),qe=Object(Ie.a)(Ke.prototype,"loading",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Qe=Object(Ie.a)(Ke.prototype,"gasPricesArray",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{label:"fast",value:"21"},{label:"standard",value:"21"},{label:"slow",value:"21"},{label:"instant",value:"21"}]}}),Xe=Object(Ie.a)(Ke.prototype,"selectedGasPrice",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"22"}}),$e=Object(Ie.a)(Ke.prototype,"selectedGasShare",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"10"}}),Object(Ie.a)(Ke.prototype,"standardInHex",[De.d],Object.getOwnPropertyDescriptor(Ke.prototype,"standardInHex"),Ke.prototype),Object(Ie.a)(Ke.prototype,"setSelectedGasPrice",[De.c],Object.getOwnPropertyDescriptor(Ke.prototype,"setSelectedGasPrice"),Ke.prototype),Object(Ie.a)(Ke.prototype,"setSelectedGasShare",[De.c],Object.getOwnPropertyDescriptor(Ke.prototype,"setSelectedGasShare"),Ke.prototype),Ke),st=n(154),ot=n(18),it=(et=function(){function e(t){Object(d.a)(this,e),Object(He.a)(this,"txs",tt,this),this.txHashToIndex={},Object(He.a)(this,"approval",nt,this),this.tokenStore=t.tokenStore,this.web3Store=t.web3Store,this.gasPriceStore=t.gasPriceStore,this.interval=null}return Object(p.a)(e,[{key:"reset",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.txs=[],this.txHashToIndex={},this.approval="",this.keepRunning=!1,clearInterval(this.interval);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doSend",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.keepRunning=!0,this.txs=[],this.approval="",new ot(""===this.tokenStore.totalBalance?"0":this.tokenStore.totalBalance).gt(new ot(""===this.tokenStore.allowance?"0":this.tokenStore.allowance))?(this._approve(),t=setInterval((function(){if(n.approval){var e=n.txHashToIndex[n.approval];console.log("checking autorun",e,n.approval,n.txHashToIndex,Object(De.k)(n.txs)),n.txs[e]&&"mined"===n.txs[e].status&&(clearInterval(t),console.log("lets GO!",n.tokenStore.totalNumberTx,n.tokenStore.arrayLimit),setTimeout((function(){n._multisend({slice:n.tokenStore.totalNumberTx,addPerTx:n.tokenStore.arrayLimit})}),1e3))}else console.log("checking autorun",n.txHashToIndex,Object(De.k)(n.txs))}),3e3),this.interval=t):this._multisend({slice:this.tokenStore.totalNumberTx,addPerTx:this.tokenStore.arrayLimit});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doApprove",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.keepRunning=!0,this.txs=[],this.approval="",new ot(""===this.tokenStore.totalBalance?"0":this.tokenStore.totalBalance).gt(new ot(""===this.tokenStore.allowance?"0":this.tokenStore.allowance))&&(this._approve(),t=setInterval((function(){if(n.approval){var e=n.txHashToIndex[n.approval];console.log("checking autorun",e,n.approval,n.txHashToIndex,Object(De.k)(n.txs)),n.txs[e]&&"mined"===n.txs[e].status&&(clearInterval(t),console.log("Approve complete"))}else console.log("checking autorun",n.txHashToIndex,Object(De.k)(n.txs))}),3e3),this.interval=t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_approve",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,a,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.txs.length,n=this.web3Store.web3,e.next=4,n.eth.getGasPrice();case 4:return r=e.sent,a=new n.eth.Contract(Ze,this.tokenStore.tokenAddress),e.prev=6,e.t0=a.methods,e.next=10,this.tokenStore.proxyMultiSenderAddress();case 10:return e.t1=e.sent,e.t2=this.tokenStore.totalBalanceWithDecimals,e.abrupt("return",e.t0.approve.call(e.t0,e.t1,e.t2).send({from:this.web3Store.defaultAccount,gasPrice:r}).once("transactionHash",(function(e){s.approval=e,s.txHashToIndex[e]=t,s.txs[t]={status:"pending",name:"MultiSender Approval to spend ".concat(s.tokenStore.totalBalance," ").concat(s.tokenStore.tokenSymbol),hash:e}})).once("receipt",function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getTxStatus(t.transactionHash);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){E()("Error!",e.message,"error"),console.error(e)})));case 15:e.prev=15,e.t3=e.catch(6),console.error(e.t3);case 18:case"end":return e.stop()}}),e,this,[[6,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"getApproveGas",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.web3Store.web3,n=new t.eth.Contract(Ze,this.tokenStore.tokenAddress),e.t0=n.methods,e.next=5,this.tokenStore.proxyMultiSenderAddress();case 5:return e.t1=e.sent,e.t2=this.tokenStore.totalBalanceWithDecimals,e.next=9,e.t0.approve.call(e.t0,e.t1,e.t2).encodeABI({from:this.web3Store.defaultAccount});case 9:return r=e.sent,e.abrupt("return",t.eth.estimateGas({from:this.web3Store.defaultAccount,data:r,to:this.tokenStore.tokenAddress}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getTransferGas",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.web3Store.web3,"0x000000000000000000000000000000000000bEEF"!==this.tokenStore.tokenAddress){e.next=6;break}return e.abrupt("return",r.eth.estimateGas({from:this.web3Store.defaultAccount,value:n,to:t}));case 6:return a=new r.eth.Contract(Ze,this.tokenStore.tokenAddress),e.next=9,a.methods.transfer(t,n).encodeABI({from:this.web3Store.defaultAccount});case 9:return s=e.sent,e.next=12,r.eth.estimateGas({from:this.web3Store.defaultAccount,data:s,to:this.tokenStore.tokenAddress});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransferGas",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,a,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=this.tokenStore,r=n.addresses_to_send,a=n.balances_to_send,s=0;case 3:if(!(s<r.length)){e.next=13;break}return o=r[s],i=a[s],e.t0=t,e.next=9,this._getTransferGas(o,i);case 9:t=e.t0+=e.sent;case 10:s++,e.next=3;break;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMultisendGas",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,s,o,i,c,u,d,p,h,b,f,m,x,j,y,v,k,O;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slice,r=t.addPerTx,a=0,s=this.tokenStore.tokenAddress,o=this.tokenStore,i=o.addresses_to_send,c=o.balances_to_send,u=o.currentFee,o.totalBalance,d=(n-1)*r,p=n*r,i=i.slice(d,p),c=c.slice(d,p),h=c.reduce((function(e,t){return e.plus(new ot(t))}),new ot("0")),b=h.toString(10),"0x000000000000000000000000000000000000bEEF"===s?(m=S.a.fromWei(h.toString()),f=new ot(u).plus(m)):f=new ot(u),console.log("slice",n,i[0],c[0],r),x=this.web3Store.web3,e.t0=x.eth.Contract,e.t1=st,e.next=17,this.tokenStore.proxyMultiSenderAddress();case 17:if(e.t2=e.sent,j=new e.t0(e.t1,e.t2),"0x000000000000000000000000000000000000bEEF"!==s){e.next=37;break}return e.next=22,j.methods.multiTransfer_OST(i,c).encodeABI({from:this.web3Store.defaultAccount});case 22:return y=e.sent,e.t3=x.eth,e.t4=this.web3Store.defaultAccount,e.t5=y,e.t6=S.a.toHex(S.a.toWei(f.toString())),e.next=29,this.tokenStore.proxyMultiSenderAddress();case 29:return e.t7=e.sent,e.t8={from:e.t4,data:e.t5,value:e.t6,to:e.t7},e.next=33,e.t3.estimateGas.call(e.t3,e.t8);case 33:v=e.sent,a+=v,e.next=52;break;case 37:return e.next=39,j.methods.multiTransferToken_a4A(s,i,c,b).encodeABI({from:this.web3Store.defaultAccount});case 39:return k=e.sent,e.t9=x.eth,e.t10=this.web3Store.defaultAccount,e.t11=k,e.t12=S.a.toHex(S.a.toWei(f.toString())),e.next=46,this.tokenStore.proxyMultiSenderAddress();case 46:return e.t13=e.sent,e.t14={from:e.t10,data:e.t11,value:e.t12,to:e.t13},e.next=50,e.t9.estimateGas.call(e.t9,e.t14);case 50:O=e.sent,a+=O;case 52:if(!(--n>0)){e.next=58;break}return e.t15=a,e.next=57,this.getMultisendGas({slice:n,addPerTx:r});case 57:a=e.t15+=e.sent;case 58:return e.abrupt("return",a);case 59:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_multisend",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,s,o,i,c,d,p,h,b,f,m,x,j,y,v,k,O,g,w,A=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.slice,r=t.addPerTx,this.keepRunning){e.next=3;break}return e.abrupt("return");case 3:return a=this.tokenStore.tokenAddress,s=this.tokenStore,o=s.addresses_to_send,i=s.balances_to_send,c=s.currentFee,s.totalBalance,d=(n-1)*r,p=n*r,o=o.slice(d,p),i=i.slice(d,p),h=i.reduce((function(e,t){return e.plus(new ot(t))}),new ot("0")),b=h.toString(10),"0x000000000000000000000000000000000000bEEF"===a?(m=S.a.fromWei(h.toString()),f=new ot(c).plus(m)):f=new ot(c),console.log("slice",n,o[0],i[0],r),x=this.web3Store.web3,e.t0=x.eth.Contract,e.t1=st,e.next=18,this.tokenStore.proxyMultiSenderAddress();case 18:if(e.t2=e.sent,j=new e.t0(e.t1,e.t2),e.prev=20,"0x000000000000000000000000000000000000bEEF"!==a){e.next=43;break}return e.next=24,j.methods.multiTransfer_OST(o,i).encodeABI({from:this.web3Store.defaultAccount});case 24:return y=e.sent,e.t3=x.eth,e.t4=this.web3Store.defaultAccount,e.t5=y,e.t6=S.a.toHex(S.a.toWei(f.toString())),e.next=31,this.tokenStore.proxyMultiSenderAddress();case 31:return e.t7=e.sent,e.t8={from:e.t4,data:e.t5,value:e.t6,to:e.t7},e.next=35,e.t3.estimateGas.call(e.t3,e.t8);case 35:return v=e.sent,console.log("gas",v),e.next=39,x.eth.getGasPrice();case 39:k=e.sent,j.methods.multiTransfer_OST(o,i).send({from:this.web3Store.defaultAccount,gasPrice:k,gas:S.a.toHex(v),value:S.a.toHex(S.a.toWei(f.toString()))}).once("transactionHash",(function(e){A.txHashToIndex[e]=A.txs.length,A.txs.push({status:"pending",name:"Sending Batch #".concat(A.txs.length," ").concat(A.tokenStore.tokenSymbol,"\n\n            From ").concat(o[0].substring(0,7)," to: ").concat(o[o.length-1].substring(0,7),"\n          "),hash:e})})).once("receipt",function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getTxStatus(t.transactionHash);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){E()("Error!",e.message,"error"),console.log(e),A._multisend({slice:n,addPerTx:r})})),e.next=62;break;case 43:return e.next=45,j.methods.multiTransferToken_a4A(a,o,i,b).encodeABI({from:this.web3Store.defaultAccount});case 45:return O=e.sent,e.t9=x.eth,e.t10=this.web3Store.defaultAccount,e.t11=O,e.t12=S.a.toHex(S.a.toWei(f.toString())),e.next=52,this.tokenStore.proxyMultiSenderAddress();case 52:return e.t13=e.sent,e.t14={from:e.t10,data:e.t11,value:e.t12,to:e.t13},e.next=56,e.t9.estimateGas.call(e.t9,e.t14);case 56:return g=e.sent,console.log("gas",g),e.next=60,x.eth.getGasPrice();case 60:w=e.sent,j.methods.multiTransferToken_a4A(a,o,i,b).send({from:this.web3Store.defaultAccount,gasPrice:w,gas:S.a.toHex(g),value:S.a.toHex(S.a.toWei(f.toString()))}).once("transactionHash",(function(e){A.txHashToIndex[e]=A.txs.length,A.txs.push({status:"pending",name:"Sending Batch #".concat(A.txs.length," ").concat(A.tokenStore.tokenSymbol,"\n\n            From ").concat(o[0].substring(0,7)," to: ").concat(o[o.length-1].substring(0,7),"\n          "),hash:e})})).once("receipt",function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getTxStatus(t.transactionHash);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){E()("Error!",e.message,"error"),console.log(e),A._multisend({slice:n,addPerTx:r})}));case 62:--n>0&&this._multisend({slice:n,addPerTx:r}),e.next=69;break;case 66:e.prev=66,e.t15=e.catch(20),console.error(e.t15);case 69:case"end":return e.stop()}}),e,this,[[20,66]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTxReceipt",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getTxReceipt"),e.prev=1,n=this.web3Store.web3,e.next=5,n.eth.getTransaction(t);case 5:return r=e.sent,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTxStatus",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("GET TX STATUS",t),this.keepRunning){e.next=3;break}return e.abrupt("return");case 3:return n=this.txHashToIndex[t],r=this.web3Store.web3,e.next=7,r.eth.getTransaction(t);case 7:return a=e.sent,e.next=10,r.eth.getTransactionReceipt(t);case 10:(s=e.sent).hasOwnProperty("status")?"0x1"===s.status?this.txs[n].status="mined":"0x0"===s.status||s.gasUsed>=a.gas?(this.txs[n].status="error",this.txs[n].name="Mined but with errors. Perhaps out of gas"):this.txs[n].status="mined":s.gasUsed>=a.gas?(this.txs[n].status="error",this.txs[n].name="Mined but with errors. Perhaps out of gas"):this.txs[n].status="mined";case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getApproveTxGas",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.approval){e.next=2;break}return e.abrupt("return",0);case 2:return t=this.web3Store.web3,e.next=5,t.eth.getTransactionReceipt(this.approval);case 5:return n=e.sent,e.abrupt("return",n.gasUsed);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),tt=Object(Ie.a)(et.prototype,"txs",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nt=Object(Ie.a)(et.prototype,"approval",[De.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(Ie.a)(et.prototype,"reset",[De.c],Object.getOwnPropertyDescriptor(et.prototype,"reset"),et.prototype),Object(Ie.a)(et.prototype,"doSend",[De.c],Object.getOwnPropertyDescriptor(et.prototype,"doSend"),et.prototype),Object(Ie.a)(et.prototype,"doApprove",[De.c],Object.getOwnPropertyDescriptor(et.prototype,"doApprove"),et.prototype),et),ct=new function e(){Object(d.a)(this,e),this.gasPriceStore=new at,this.web3Store=new Je(this),this.tokenStore=new rt(this),this.txStore=new it(this)},lt=Object(j.jsx)(f.a,{UiStore:ct,children:Object(j.jsx)(Fe.a,{children:Object(j.jsx)(Be,{})})});i.a.render(lt,document.getElementById("wp-multisender-container"))}},[[663,1,2]]]);
//# sourceMappingURL=main.1ce2732d.chunk.js.map